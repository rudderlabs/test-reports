{
  "output": [
    {
      "batchedRequest": [
        {
          "version": "1",
          "type": "REST",
          "method": "POST",
          "endpoint": "https://a.klaviyo.com/api/profile-subscription-bulk-create-jobs",
          "headers": {
            "Authorization": "Klaviyo-API-Key klaviyo1",
            "Content-Type": "application/json",
            "Accept": "application/json",
            "revision": "2023-02-22"
          },
          "params": {},
          "body": {
            "JSON": {
              "data": {
                "type": "profile-subscription-bulk-create-job",
                "attributes": {
                  "list_id": "XUepkK",
                  "subscriptions": [
                    {
                      "email": "test@rudderstack.com",
                      "phone_number": "+12 345 678 900"
                    }
                  ]
                }
              }
            },
            "JSON_ARRAY": {},
            "XML": {},
            "FORM": {}
          },
          "files": {}
        }
      ],
      "metadata": [
        {
          "jobId": 3,
          "attemptNum": 1,
          "userId": "default-userId",
          "sourceId": "default-sourceId",
          "destinationId": "default-destinationId",
          "workspaceId": "default-workspaceId",
          "secret": {
            "accessToken": "commonAccessToken"
          },
          "dontBatch": false
        }
      ],
      "batched": true,
      "statusCode": 200,
      "destination": {
        "ID": "123",
        "Name": "klaviyo",
        "DestinationDefinition": {
          "ID": "123",
          "Name": "klaviyo",
          "DisplayName": "klaviyo",
          "Config": {}
        },
        "Config": {
          "privateApiKey": "klaviyo1"
        },
        "Enabled": true,
        "WorkspaceID": "123",
        "Transformations": []
      }
    },
    {
      "batchedRequest": [
        {
          "version": "1",
          "type": "REST",
          "method": "POST",
          "endpoint": "https://a.klaviyo.com/api/profile-subscription-bulk-create-jobs",
          "headers": {
            "Authorization": "Klaviyo-API-Key klaviyo1",
            "Content-Type": "application/json",
            "Accept": "application/json",
            "revision": "2023-02-22"
          },
          "params": {},
          "body": {
            "JSON": {
              "data": {
                "type": "profile-subscription-bulk-create-job",
                "attributes": {
                  "list_id": "XUepkK",
                  "subscriptions": [
                    {
                      "email": "test@rudderstack.com",
                      "phone_number": "+12 345 578 900",
                      "channels": {
                        "email": [
                          "MARKETING"
                        ],
                        "sms": [
                          "MARKETING"
                        ]
                      }
                    }
                  ]
                }
              }
            },
            "JSON_ARRAY": {},
            "XML": {},
            "FORM": {}
          },
          "files": {}
        },
        {
          "version": "1",
          "type": "REST",
          "method": "PATCH",
          "endpoint": "https://a.klaviyo.com/api/profiles/01GW3PHVY0MTCDGS0A1612HARX",
          "headers": {
            "Authorization": "Klaviyo-API-Key klaviyo1",
            "Content-Type": "application/json",
            "Accept": "application/json",
            "revision": "2023-02-22"
          },
          "params": {},
          "body": {
            "JSON": {
              "data": {
                "type": "profile",
                "attributes": {
                  "external_id": "test",
                  "email": "test@rudderstack.com",
                  "first_name": "Test",
                  "last_name": "Rudderlabs",
                  "phone_number": "+12 345 578 900",
                  "title": "Developer",
                  "organization": "Rudder",
                  "location": {
                    "city": "Tokyo",
                    "region": "Kanto",
                    "country": "JP",
                    "zip": "100-0001"
                  },
                  "properties": {
                    "Flagged": false,
                    "Residence": "Shibuya"
                  }
                },
                "id": "01GW3PHVY0MTCDGS0A1612HARX"
              }
            },
            "JSON_ARRAY": {},
            "XML": {},
            "FORM": {}
          },
          "files": {}
        }
      ],
      "metadata": [
        {
          "jobId": 2,
          "attemptNum": 1,
          "userId": "default-userId",
          "sourceId": "default-sourceId",
          "destinationId": "default-destinationId",
          "workspaceId": "default-workspaceId",
          "secret": {
            "accessToken": "commonAccessToken"
          },
          "dontBatch": false
        }
      ],
      "batched": true,
      "statusCode": 200,
      "destination": {
        "ID": "123",
        "Name": "klaviyo",
        "DestinationDefinition": {
          "ID": "123",
          "Name": "klaviyo",
          "DisplayName": "klaviyo",
          "Config": {}
        },
        "Config": {
          "privateApiKey": "klaviyo1"
        },
        "Enabled": true,
        "WorkspaceID": "123",
        "Transformations": []
      }
    },
    {
      "batchedRequest": {
        "version": "1",
        "type": "REST",
        "method": "PATCH",
        "endpoint": "https://a.klaviyo.com/api/profiles/01GW3PHVY0MTCDGS0A1612HARX",
        "headers": {
          "Authorization": "Klaviyo-API-Key klaviyo1",
          "Content-Type": "application/json",
          "Accept": "application/json",
          "revision": "2023-02-22"
        },
        "params": {},
        "body": {
          "JSON": {
            "data": {
              "type": "profile",
              "attributes": {
                "external_id": "test",
                "email": "test_1@rudderstack.com",
                "first_name": "Test",
                "last_name": "Rudderlabs",
                "phone_number": "+12 345 578 900",
                "title": "Developer",
                "organization": "Rudder",
                "location": {
                  "city": "Tokyo",
                  "region": "Kanto",
                  "country": "JP",
                  "zip": "100-0001"
                },
                "properties": {
                  "Flagged": false,
                  "Residence": "Shibuya"
                }
              },
              "id": "01GW3PHVY0MTCDGS0A1612HARX"
            }
          },
          "JSON_ARRAY": {},
          "XML": {},
          "FORM": {}
        },
        "files": {}
      },
      "metadata": [
        {
          "jobId": 1,
          "attemptNum": 1,
          "userId": "default-userId",
          "sourceId": "default-sourceId",
          "destinationId": "default-destinationId",
          "workspaceId": "default-workspaceId",
          "secret": {
            "accessToken": "commonAccessToken"
          },
          "dontBatch": false
        }
      ],
      "batched": false,
      "statusCode": 200,
      "destination": {
        "ID": "123",
        "Name": "klaviyo",
        "DestinationDefinition": {
          "ID": "123",
          "Name": "klaviyo",
          "DisplayName": "klaviyo",
          "Config": {}
        },
        "Config": {
          "privateApiKey": "klaviyo1"
        },
        "Enabled": true,
        "WorkspaceID": "123",
        "Transformations": []
      }
    },
    {
      "metadata": [
        {
          "jobId": 4,
          "attemptNum": 1,
          "userId": "default-userId",
          "sourceId": "default-sourceId",
          "destinationId": "default-destinationId",
          "workspaceId": "default-workspaceId",
          "secret": {
            "accessToken": "commonAccessToken"
          },
          "dontBatch": false
        }
      ],
      "batched": false,
      "statusCode": 400,
      "error": "Event type random is not supported",
      "statTags": {
        "errorCategory": "dataValidation",
        "errorType": "instrumentation",
        "destType": "KLAVIYO",
        "module": "destination",
        "implementation": "native",
        "feature": "router",
        "destinationId": "default-destinationId",
        "workspaceId": "default-workspaceId"
      },
      "destination": {
        "ID": "123",
        "Name": "klaviyo",
        "DestinationDefinition": {
          "ID": "123",
          "Name": "klaviyo",
          "DisplayName": "klaviyo",
          "Config": {}
        },
        "Config": {
          "privateApiKey": "klaviyo1"
        },
        "Enabled": true,
        "WorkspaceID": "123",
        "Transformations": []
      }
    },
    {
      "metadata": [
        {
          "jobId": 5,
          "attemptNum": 1,
          "userId": "default-userId",
          "sourceId": "default-sourceId",
          "destinationId": "default-destinationId",
          "workspaceId": "default-workspaceId",
          "secret": {
            "accessToken": "commonAccessToken"
          },
          "dontBatch": false
        }
      ],
      "batched": false,
      "statusCode": 400,
      "error": "groupId is a required field for group events",
      "statTags": {
        "errorCategory": "dataValidation",
        "errorType": "instrumentation",
        "destType": "KLAVIYO",
        "module": "destination",
        "implementation": "native",
        "feature": "router",
        "destinationId": "default-destinationId",
        "workspaceId": "default-workspaceId"
      },
      "destination": {
        "ID": "123",
        "Name": "klaviyo",
        "DestinationDefinition": {
          "ID": "123",
          "Name": "klaviyo",
          "DisplayName": "klaviyo",
          "Config": {}
        },
        "Config": {
          "privateApiKey": "klaviyo1"
        },
        "Enabled": true,
        "WorkspaceID": "123",
        "Transformations": []
      }
    }
  ]
}