{
  "body": {
    "input": [
      {
        "message": {
          "type": "record",
          "action": "insert",
          "fields": {},
          "channel": "sources",
          "context": {
            "sources": {
              "job_id": "randomJobId",
              "version": "local",
              "job_run_id": "jobRunId",
              "task_run_id": "taskRunId"
            }
          },
          "recordId": "3",
          "rudderId": "randomRudderId",
          "messageId": "randomMessageId",
          "receivedAt": "2024-11-08T10:30:41.618+05:30",
          "request_ip": "[::1]",
          "identifiers": {
            "id": "batch-valid-1"
          }
        },
        "metadata": {
          "jobId": 1,
          "attemptNum": 1,
          "userId": "default-userId",
          "sourceId": "default-sourceId",
          "destinationId": "default-destinationId",
          "workspaceId": "default-workspaceId",
          "secret": {
            "accessToken": "commonAccessToken"
          },
          "dontBatch": false
        },
        "destination": {
          "Config": {
            "apiKey": "customerio_audience2",
            "appApiKey": "test-app-api-key",
            "connectionMode": "cloud",
            "siteId": "customerio_audience1"
          },
          "DestinationDefinition": {
            "DisplayName": "Customer.io Audience",
            "ID": "123",
            "Name": "CUSTOMERIO_AUDIENCE",
            "Config": {}
          },
          "Enabled": true,
          "ID": "123",
          "Name": "CUSTOMERIO_AUDIENCE",
          "Transformations": [],
          "WorkspaceID": "test-workspace-id"
        },
        "connection": {
          "sourceId": "dummy-source-id",
          "destinationId": "dummy-destination-id",
          "enabled": true,
          "config": {
            "destination": {
              "schemaVersion": "1.1",
              "audienceId": "test-segment-id",
              "identifierMappings": [
                {
                  "from": "some-key",
                  "to": "id"
                }
              ]
            }
          }
        }
      },
      {
        "message": {
          "type": "record",
          "action": "insert",
          "fields": {},
          "channel": "sources",
          "context": {
            "sources": {
              "job_id": "randomJobId",
              "version": "local",
              "job_run_id": "jobRunId",
              "task_run_id": "taskRunId"
            }
          },
          "recordId": "3",
          "rudderId": "randomRudderId",
          "messageId": "randomMessageId",
          "receivedAt": "2024-11-08T10:30:41.618+05:30",
          "request_ip": "[::1]",
          "identifiers": {
            "id": "batch-valid-2"
          }
        },
        "metadata": {
          "jobId": 2,
          "attemptNum": 1,
          "userId": "default-userId",
          "sourceId": "default-sourceId",
          "destinationId": "default-destinationId",
          "workspaceId": "default-workspaceId",
          "secret": {
            "accessToken": "commonAccessToken"
          },
          "dontBatch": false
        },
        "destination": {
          "Config": {
            "apiKey": "customerio_audience2",
            "appApiKey": "test-app-api-key",
            "connectionMode": "cloud",
            "siteId": "customerio_audience1"
          },
          "DestinationDefinition": {
            "DisplayName": "Customer.io Audience",
            "ID": "123",
            "Name": "CUSTOMERIO_AUDIENCE",
            "Config": {}
          },
          "Enabled": true,
          "ID": "123",
          "Name": "CUSTOMERIO_AUDIENCE",
          "Transformations": [],
          "WorkspaceID": "test-workspace-id"
        },
        "connection": {
          "sourceId": "dummy-source-id",
          "destinationId": "dummy-destination-id",
          "enabled": true,
          "config": {
            "destination": {
              "schemaVersion": "1.1",
              "audienceId": "test-segment-id",
              "identifierMappings": [
                {
                  "from": "some-key",
                  "to": "id"
                }
              ]
            }
          }
        }
      },
      {
        "message": {
          "type": "record",
          "action": "insert",
          "fields": {},
          "channel": "sources",
          "context": {
            "sources": {
              "job_id": "randomJobId",
              "version": "local",
              "job_run_id": "jobRunId",
              "task_run_id": "taskRunId"
            }
          },
          "recordId": "3",
          "rudderId": "randomRudderId",
          "messageId": "randomMessageId",
          "receivedAt": "2024-11-08T10:30:41.618+05:30",
          "request_ip": "[::1]",
          "identifiers": {
            "id": "batch-valid-3"
          }
        },
        "metadata": {
          "jobId": 3,
          "attemptNum": 1,
          "userId": "default-userId",
          "sourceId": "default-sourceId",
          "destinationId": "default-destinationId",
          "workspaceId": "default-workspaceId",
          "secret": {
            "accessToken": "commonAccessToken"
          },
          "dontBatch": false
        },
        "destination": {
          "Config": {
            "apiKey": "customerio_audience2",
            "appApiKey": "test-app-api-key",
            "connectionMode": "cloud",
            "siteId": "customerio_audience1"
          },
          "DestinationDefinition": {
            "DisplayName": "Customer.io Audience",
            "ID": "123",
            "Name": "CUSTOMERIO_AUDIENCE",
            "Config": {}
          },
          "Enabled": true,
          "ID": "123",
          "Name": "CUSTOMERIO_AUDIENCE",
          "Transformations": [],
          "WorkspaceID": "test-workspace-id"
        },
        "connection": {
          "sourceId": "dummy-source-id",
          "destinationId": "dummy-destination-id",
          "enabled": true,
          "config": {
            "destination": {
              "schemaVersion": "1.1",
              "audienceId": "test-segment-id",
              "identifierMappings": [
                {
                  "from": "some-key",
                  "to": "id"
                }
              ]
            }
          }
        }
      },
      {
        "message": {
          "type": "record",
          "action": "invalid-action",
          "fields": {},
          "channel": "sources",
          "context": {
            "sources": {
              "job_id": "randomJobId",
              "version": "local",
              "job_run_id": "jobRunId",
              "task_run_id": "taskRunId"
            }
          },
          "recordId": "3",
          "rudderId": "randomRudderId",
          "messageId": "randomMessageId",
          "receivedAt": "2024-11-08T10:30:41.618+05:30",
          "request_ip": "[::1]",
          "identifiers": {
            "id": "batch-invalid-1"
          }
        },
        "metadata": {
          "jobId": 4,
          "attemptNum": 1,
          "userId": "default-userId",
          "sourceId": "default-sourceId",
          "destinationId": "default-destinationId",
          "workspaceId": "default-workspaceId",
          "secret": {
            "accessToken": "commonAccessToken"
          },
          "dontBatch": false
        },
        "destination": {
          "Config": {
            "apiKey": "customerio_audience2",
            "appApiKey": "test-app-api-key",
            "connectionMode": "cloud",
            "siteId": "customerio_audience1"
          },
          "DestinationDefinition": {
            "DisplayName": "Customer.io Audience",
            "ID": "123",
            "Name": "CUSTOMERIO_AUDIENCE",
            "Config": {}
          },
          "Enabled": true,
          "ID": "123",
          "Name": "CUSTOMERIO_AUDIENCE",
          "Transformations": [],
          "WorkspaceID": "test-workspace-id"
        },
        "connection": {
          "sourceId": "dummy-source-id",
          "destinationId": "dummy-destination-id",
          "enabled": true,
          "config": {
            "destination": {
              "schemaVersion": "1.1",
              "audienceId": "test-segment-id",
              "identifierMappings": [
                {
                  "from": "some-key",
                  "to": "id"
                }
              ]
            }
          }
        }
      },
      {
        "message": {
          "type": "record",
          "action": "delete",
          "fields": {},
          "channel": "sources",
          "context": {
            "sources": {
              "job_id": "randomJobId",
              "version": "local",
              "job_run_id": "jobRunId",
              "task_run_id": "taskRunId"
            }
          },
          "recordId": "3",
          "rudderId": "randomRudderId",
          "messageId": "randomMessageId",
          "receivedAt": "2024-11-08T10:30:41.618+05:30",
          "request_ip": "[::1]",
          "identifiers": {
            "id": "batch-valid-4"
          }
        },
        "metadata": {
          "jobId": 5,
          "attemptNum": 1,
          "userId": "default-userId",
          "sourceId": "default-sourceId",
          "destinationId": "default-destinationId",
          "workspaceId": "default-workspaceId",
          "secret": {
            "accessToken": "commonAccessToken"
          },
          "dontBatch": false
        },
        "destination": {
          "Config": {
            "apiKey": "customerio_audience2",
            "appApiKey": "test-app-api-key",
            "connectionMode": "cloud",
            "siteId": "customerio_audience1"
          },
          "DestinationDefinition": {
            "DisplayName": "Customer.io Audience",
            "ID": "123",
            "Name": "CUSTOMERIO_AUDIENCE",
            "Config": {}
          },
          "Enabled": true,
          "ID": "123",
          "Name": "CUSTOMERIO_AUDIENCE",
          "Transformations": [],
          "WorkspaceID": "test-workspace-id"
        },
        "connection": {
          "sourceId": "dummy-source-id",
          "destinationId": "dummy-destination-id",
          "enabled": true,
          "config": {
            "destination": {
              "schemaVersion": "1.1",
              "audienceId": "test-segment-id",
              "identifierMappings": [
                {
                  "from": "some-key",
                  "to": "id"
                }
              ]
            }
          }
        }
      },
      {
        "message": {
          "type": "record",
          "action": "delete",
          "fields": {},
          "channel": "sources",
          "context": {
            "sources": {
              "job_id": "randomJobId",
              "version": "local",
              "job_run_id": "jobRunId",
              "task_run_id": "taskRunId"
            }
          },
          "recordId": "3",
          "rudderId": "randomRudderId",
          "messageId": "randomMessageId",
          "receivedAt": "2024-11-08T10:30:41.618+05:30",
          "request_ip": "[::1]",
          "identifiers": {
            "id": "batch-valid-5"
          }
        },
        "metadata": {
          "jobId": 6,
          "attemptNum": 1,
          "userId": "default-userId",
          "sourceId": "default-sourceId",
          "destinationId": "default-destinationId",
          "workspaceId": "default-workspaceId",
          "secret": {
            "accessToken": "commonAccessToken"
          },
          "dontBatch": false
        },
        "destination": {
          "Config": {
            "apiKey": "customerio_audience2",
            "appApiKey": "test-app-api-key",
            "connectionMode": "cloud",
            "siteId": "customerio_audience1"
          },
          "DestinationDefinition": {
            "DisplayName": "Customer.io Audience",
            "ID": "123",
            "Name": "CUSTOMERIO_AUDIENCE",
            "Config": {}
          },
          "Enabled": true,
          "ID": "123",
          "Name": "CUSTOMERIO_AUDIENCE",
          "Transformations": [],
          "WorkspaceID": "test-workspace-id"
        },
        "connection": {
          "sourceId": "dummy-source-id",
          "destinationId": "dummy-destination-id",
          "enabled": true,
          "config": {
            "destination": {
              "schemaVersion": "1.1",
              "audienceId": "test-segment-id",
              "identifierMappings": [
                {
                  "from": "some-key",
                  "to": "id"
                }
              ]
            }
          }
        }
      }
    ],
    "destType": "customerio_audience"
  },
  "method": "POST"
}